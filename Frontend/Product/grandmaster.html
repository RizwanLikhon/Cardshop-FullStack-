<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Booster Packs</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>

<header>
  <h1>Booster Packs</h1>
</header>

<nav>
  <ul>
    <li><a href="../index.html">Home</a></li>

    <li class="dropdown">
      <button class="dropdown-toggle" id="productsBtn">Products â–¾</button>
      <ul class="dropdown-menu" id="productsMenu">
        <li><a href="pack.html">Booster Packs</a></li>
        <li><a href="cards.html">Cards</a></li>
        <li><a href="grandmaster.html">Grand Master Set</a></li>
        <li><a href="master.html">Master Set</a></li>
      </ul>
    </li>

    <li class="cart-icon">
      <a href="../cart.html">ðŸ›’ <span id="cart-count">0</span></a>
    </li>
  </ul>
</nav>

<main>
  <section>
    <h2>Booster Packs</h2>
    <div class="pokemon-grid" id="pack-grid"></div>
  </section>
</main>

<script src="../../js/script.js"></script>
<script>
  fetch("http://localhost:5000/api/products?category=grandmaster")
    .then(res => res.json())
    .then(products => {
      const grid = document.getElementById("pack-grid");

      products.forEach(p => {
        const card = document.createElement("div");
        card.className = "pokemon-product";

        card.innerHTML = `
          <img src="${p.image_url}" alt="${p.name}">
          <h3>${p.name}</h3>
          <p class="price">$${Number(p.price).toFixed(2)}</p>

          <div class="qty-controls">
            <button onclick="changeQty(${p.id}, -1)">âˆ’</button>
            <input id="qty-${p.id}" type="number" min="1" value="1">
            <button onclick="changeQty(${p.id}, 1)">+</button>
          </div>

          <button onclick="addToCart({
            id: ${p.id},
            name: '${p.name.replace(/'/g, "\\'")}',
            price: ${p.price},
            image: '${p.image_url}'
          }, document.getElementById('qty-${p.id}').value)">
            Add to Cart
          </button>
        `;

        grid.appendChild(card);
      });
    })
    .catch(err => console.error(err));
</script>

</body>
</html>
